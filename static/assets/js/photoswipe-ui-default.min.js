!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";return function(l,s){function e(e){if(K)return!0;e=e||window.event,O.timeToIdle&&O.mouseUsed&&!I&&Z();for(var t,n,o,l=(e.target||e.srcElement).getAttribute("class")||"",i=0;i<q.length;i++)(t=q[i]).onTap&&-1<l.indexOf("pswp__"+t.name)&&(t.onTap(),n=!0);n&&(e.stopPropagation&&e.stopPropagation(),K=!0,o=s.features.isOldAndroid?600:30,setTimeout(function(){K=!1},o))}function n(e,t,n){s[(n?"add":"remove")+"Class"](e,"pswp__"+t)}function o(){var e=1===O.getNumItemsFn();e!==S&&(n(m,"ui--one-slide",e),S=e)}function t(){n(C,"share-modal--hidden",D)}function i(){return(D=!D)?(s.removeClass(C,"pswp__share-modal--fade-in"),setTimeout(function(){D&&t()},300)):(t(),setTimeout(function(){D||s.addClass(C,"pswp__share-modal--fade-in")},30)),D||N(),0}function r(e){var t=(e=e||window.event).target||e.srcElement;return l.shout("shareLinkClick",e,t),!!t.href&&(!!t.hasAttribute("download")||(window.open(t.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),D||i(),!1))}function a(e){for(var t=0;t<O.closeElClasses.length;t++)if(s.hasClass(e,"pswp__"+O.closeElClasses[t]))return!0}function u(e){var t=(e=e||window.event).relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(A),A=setTimeout(function(){R.setIdle(!0)},O.timeToIdleOutside))}function c(e){var t,n=e.vGap,o=O.barsSize;!l.likelyTouchDevice||O.mouseUsed||screen.width>O.fitControlsWidth?(O.captionEl&&"auto"===o.bottom?(h||((h=s.createEl("pswp__caption pswp__caption--fake")).appendChild(s.createEl("pswp__caption__center")),m.insertBefore(h,f),s.addClass(m,"pswp__ui--fit")),O.addCaptionHTMLFn(e,h,!0)?(t=h.clientHeight,n.bottom=parseInt(t,10)||44):n.bottom=o.top):n.bottom="auto"===o.bottom?0:o.bottom,n.top=o.top):n.top=n.bottom=0}function d(){function e(e){if(e)for(var t=e.length,n=0;n<t;n++){l=e[n],i=l.className;for(var o=0;o<q.length;o++)r=q[o],-1<i.indexOf("pswp__"+r.name)&&(O[r.option]?(s.removeClass(l,"pswp__element--disabled"),r.onInit&&r.onInit(l)):s.addClass(l,"pswp__element--disabled"))}}var l,i,r;e(m.children);var t=s.getChildByClass(m,"pswp__top-bar");t&&e(t.children)}var p,m,f,h,w,b,g,v,C,_,T,I,E,F,x,k,S,O,K,L,A,R=this,y=!1,z=!0,D=!0,M={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(s.resetEl(t.firstChild),!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,downloadEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,closeOnOutsideClick:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,clickToShowNextNonZoomable:!1,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return l.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return l.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},N=function(){for(var e,t,n,o,l="",i=0;i<O.shareButtons.length;i++)e=O.shareButtons[i],t=O.getImageURLForShare(e),n=O.getPageURLForShare(e),o=O.getTextForShare(e),l+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(o))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",O.parseShareButtonOut&&(l=O.parseShareButtonOut(e,l));C.children[0].innerHTML=l,C.children[0].onclick=r},U=0,Z=function(){clearTimeout(A),U=0,I&&R.setIdle(!1)},P=function(e){x!==e&&(n(F,"preloader--active",!e),x=e)},q=[{name:"caption",option:"captionEl",onInit:function(e){f=e}},{name:"share-modal",option:"shareEl",onInit:function(e){C=e},onTap:function(){i()}},{name:"button--share",option:"shareEl",onInit:function(e){v=e},onTap:function(){i()}},{name:"button--download",option:"downloadEl",onInit:function(e){_=e},onTap:function(){var e=document.createElement("A");e.setAttribute("href",l.currItem.downloadURL||l.currItem.src||""),e.setAttribute("target","_blank"),e.setAttribute("download",""),_.appendChild(e),e.click(),_.removeChild(e)}},{name:"button--zoom",option:"zoomEl",onTap:l.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){w=e}},{name:"button--close",option:"closeEl",onTap:function(){setTimeout(l.close)}},{name:"button--arrow--left",option:"arrowEl",onInit:function(e){b=e},onTap:l.prev},{name:"button--arrow--right",option:"arrowEl",onInit:function(e){g=e},onTap:l.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){p.isFullscreen()?p.exit():p.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){F=e}}];R.init=function(){var t;s.extend(l.options,M,!0),O=l.options,m=s.getChildByClass(l.scrollWrap,"pswp__ui"),(E=l.listen)("onVerticalDrag",function(e){z&&e<.95?R.hideControls():!z&&.95<=e&&R.showControls()}),E("onPinchClose",function(e){z&&e<.9?(R.hideControls(),t=!0):t&&!z&&.9<e&&R.showControls()}),E("zoomGestureEnded",function(){(t=!1)&&!z&&R.showControls()}),E("beforeChange",R.update),E("doubleTap",function(e){var t=l.currItem.initialZoomLevel;l.getZoomLevel()!==t?l.zoomTo(t,e,333):l.zoomTo(O.getDoubleTapZoom(!1,l.currItem),e,333)}),E("preventDragEvent",function(e,t,n){var o=e.target||e.srcElement;o&&1===o.nodeType&&o.getAttribute("class")&&-1<e.type.indexOf("mouse")&&(0<o.getAttribute("class").indexOf("__caption")||/(SMALL|STRONG|EM)/i.test(o.tagName))&&(n.prevent=!1,(void 0)())}),E("bindEvents",function(){s.bind(m,"pswpTap click",e),s.bind(l.scrollWrap,"pswpTap",R.onGlobalTap),l.likelyTouchDevice||s.bind(l.scrollWrap,"mouseover",R.onMouseOver)}),E("unbindEvents",function(){D||i(),L&&clearInterval(L),s.unbind(document,"mouseout",u),s.unbind(document,"mousemove",Z),s.unbind(m,"pswpTap click",e),s.unbind(l.scrollWrap,"pswpTap",R.onGlobalTap),s.unbind(l.scrollWrap,"mouseover",R.onMouseOver),p&&(s.unbind(document,p.eventK,R.updateFullscreen),p.isFullscreen()&&(O.hideAnimationDuration=0,p.exit()),p=null)}),E("destroy",function(){O.captionEl&&(h&&m.removeChild(h),s.removeClass(f,"pswp__caption--empty")),C&&(C.children[0].onclick=null),s.removeClass(m,"pswp__ui--over-close"),s.addClass(m,"pswp__ui--hidden"),R.setIdle(!1)}),O.showAnimationDuration||s.removeClass(m,"pswp__ui--hidden"),E("initialZoomIn",function(){O.showAnimationDuration&&s.removeClass(m,"pswp__ui--hidden")}),E("initialZoomOut",function(){s.addClass(m,"pswp__ui--hidden")}),E("parseVerticalMargin",c),d(),O.shareEl&&v&&C&&(D=!0),o(),O.timeToIdle&&E("mouseUsed",function(){s.bind(document,"mousemove",Z),s.bind(document,"mouseout",u),L=setInterval(function(){2===++U&&R.setIdle(!0)},O.timeToIdle/2)}),O.fullscreenEl&&!s.features.isOldAndroid&&((p=p||R.getFullscreenAPI())?(s.bind(document,p.eventK,R.updateFullscreen),R.updateFullscreen(),s.addClass(l.template,"pswp--supports-fs")):s.removeClass(l.template,"pswp--supports-fs")),O.preloaderEl&&(P(!0),E("beforeChange",function(){clearTimeout(k),k=setTimeout(function(){l.currItem&&l.currItem.loading?l.allowProgressiveImg()&&(!l.currItem.img||l.currItem.img.naturalWidth)||P(!1):P(!0)},O.loadingIndicatorDelay)}),E("imageLoadComplete",function(e,t){l.currItem===t&&P(!0)}))},R.setIdle=function(e){n(m,"ui--idle",I=e)},R.update=function(){var e;y=!(!z||!l.currItem)&&(R.updateIndexIndicator(),O.captionEl&&(e=O.addCaptionHTMLFn(l.currItem,f),n(f,"caption--empty",!e)),!0),D||i(),o()},R.updateFullscreen=function(e){e&&setTimeout(function(){l.setScrollOffset(0,s.getScrollY())},50),s[(p.isFullscreen()?"add":"remove")+"Class"](l.template,"pswp--fs")},R.updateIndexIndicator=function(){O.counterEl&&(w.innerHTML=l.getCurrentIndex()+1+O.indexIndicatorSep+O.getNumItemsFn()),O.loop||(0===l.getCurrentIndex()?s.addClass(b,"pswp__element--disabled"):s.removeClass(b,"pswp__element--disabled"),l.getCurrentIndex()===O.getNumItemsFn()-1?s.addClass(g,"pswp__element--disabled"):s.removeClass(g,"pswp__element--disabled"))},R.onGlobalTap=function(e){var t=(e=e||window.event).target||e.srcElement;if(!K)if(e.detail&&"mouse"===e.detail.pointerType){if(!e.detail.rightClick){if(O.closeOnOutsideClick&&a(t))return void l.close();s.hasClass(t,"pswp__img")&&(1===l.getZoomLevel()&&l.getZoomLevel()<=l.currItem.fitRatio?O.clickToCloseNonZoomable?l.close():O.clickToShowNextNonZoomable&&l.next():l.toggleDesktopZoom(e.detail.releasePoint))}}else if(O.tapToToggleControls&&(z?R.hideControls():R.showControls()),O.tapToClose&&(s.hasClass(t,"pswp__img")||O.closeOnOutsideClick&&a(t)))return void l.close()},R.onMouseOver=function(e){var t=(e=e||window.event).target||e.srcElement;n(m,"ui--over-close",a(t))},R.hideControls=function(){s.addClass(m,"pswp__ui--hidden"),z=!1},R.showControls=function(){z=!0,y||R.update(),s.removeClass(m,"pswp__ui--hidden")},R.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},R.getFullscreenAPI=function(){var e,t=document.documentElement,n="fullscreenchange";return t.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:n}:t.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+n}:t.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+n}:t.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){if(T=O.closeOnScroll,O.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return l.template[this.enterK]();l.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},e.exit=function(){return O.closeOnScroll=T,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}});